# Repository Guidelines

## Структура проєкту та модулі
- Один скетч: `CO_2_Detectior_v3.ino` містить усе (I2C, опитування SCD40, OLED, PWM RGB, фільтрацію освітленості).
- Обладнання: ESP32 (піни в коді), Sensirion SCD40, датчик TEMT6000 на ADC2, RGB KY-016, OLED SSD1306 128x64 на програмному I2C (піни 3/4), основна I2C-шина на пінах 8/9.
- Калібрувальні константи для освітленості (`DARK_ADC`, `BRIGHT_ADC`, пороги) знаходяться в секції TEMT6000 — підганяйте під свою збірку і фіксуйте в гіті.

## Збірка, прошивка та запуск
- Arduino IDE: оберіть потрібну плату ESP32, перевірте піни I2C 8/9, залийте `CO_2_Detectior_v3.ino`.
- CLI (приклад, замініть FQBN/порт): `arduino-cli compile --fqbn esp32:esp32:esp32s3 CO_2_Detectior_v3.ino`, далі `arduino-cli upload -p /dev/tty.usbmodemXXXX --fqbn esp32:esp32:esp32s3 CO_2_Detectior_v3.ino`.
- Після прошивки відкрийте монітор порту 115200 бод, щоб перевірити покази та реакцію OLED/LED.

## Стиль коду та іменування
- Дотримуйтесь поточного Arduino/C++ стилю: відступ 2 пробіли, дужки в одному рядку, snake_case для змінних і функцій.
- Тримайте визначення пінів і налаштовувані константи згрупованими за підсистемами з короткими коментарями; дрібні утиліти залишайте `inline`.
- Нові рядки/коментарі бажано ASCII; використовуйте іншу мову лише за потреби (наприклад, локалізація UI).

## Тестування та валідація
- Автотестів немає; покладайтесь на стендову перевірку.
- Смок-тест: I2C старт без помилок, OLED показує CO₂/температуру/вологість, RGB кольори: <300 ppm світло-блакитний, 300–600 блакитний, 600–1000 фіолетовий, 1000–1500 помаранчевий, >1500 червоний.
- Перевірка адаптації до світла: закрийте/відкрийте TEMT6000 — контраст OLED і яскравість LED мають перемкнутись після ~5 с (TH_LOW/TH_HIGH).

## Коміти та Pull Request
- Повідомлення комітів: короткі резюме в теперішньому часі (напр. `Adjust light thresholds`), один змістовний блок змін на коміт.
- У PR вказуйте протестоване залізо (ревізія плати, сенсори), перелік змінених калібрувальних значень, коротко «до/після» та, за потреби, лог з порту.
- Додавайте посилання на issue; для візуальних змін корисні фото дисплея/LED.

## Апаратні та конфігураційні поради
- Перевірте адресу SCD40 (0x62) і розводку перед прошивкою; невірні піни I2C зупинять вимірювання.
- Перекалібровуйте `DARK_ADC`/`BRIGHT_ADC` для нових корпусів або партій сенсорів; зафіксуйте мін/макс ADC у константах коду.
